import { SETTINGS } from "../settings.ts";
import { ColumnTextGenerationStrategy, toTextBuffer } from "./generator-strategies.ts";
import { GeneratorOutput } from "./generator-pool.ts";

export class LoremGeneratorStrategy implements ColumnTextGenerationStrategy {
  private readonly lorem: GeneratorOutput[];

  constructor() {
    const rawLorem = 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Assumenda expedita incidunt ipsam ipsum nemo officia optio provident quasi ut voluptate! Beatae doloremque id nisi provident suscipit? Ad alias aliquid, aspernatur cumque dignissimos dolores doloribus, eos excepturi harum id illum iure laboriosam magnam magni maiores maxime molestias nihil nisi perferendis quam quos soluta sunt totam vitae voluptatibus! Assumenda atque corporis cupiditate dolores esse illo maxime minima nemo non quas, quo reiciendis repellat reprehenderit tenetur vero. Consequatur, dolorem eveniet fuga nostrum odit quas recusandae sint soluta. Exercitationem hic molestias obcaecati omnis sunt. Consectetur deserunt dolorum enim, est excepturi harum incidunt, inventore ipsa minima molestias nemo numquam perferendis quas quod reiciendis repellat saepe tempora vel veniam vitae? Deserunt, minus, quam? Amet aperiam architecto culpa debitis, dignissimos distinctio dolore doloremque enim et, expedita inventore ipsa ipsum iste numquam officiis quasi reprehenderit sint tempora, tenetur voluptate. Accusantium aliquid aspernatur assumenda autem culpa earum exercitationem ipsam natus nesciunt obcaecati, perspiciatis qui totam ut! At atque earum eius hic laboriosam sed ullam! Architecto blanditiis consectetur dolores doloribus eum id ipsam nihil perferendis porro praesentium. Ad alias aliquid amet aperiam asperiores aspernatur at blanditiis consectetur, consequatur consequuntur, culpa cupiditate, deleniti dicta dignissimos dolorum eius ipsum iste iure labore laboriosam magnam maiores minus nam nihil nulla optio perferendis placeat porro praesentium provident quae quia quidem repudiandae saepe temporibus veritatis voluptatum. Accusantium adipisci, animi aperiam assumenda at beatae debitis delectus deleniti dicta dolore doloribus dolorum eligendi esse fugit labore libero nam numquam obcaecati omnis, optio quidem quo rem similique sunt temporibus veniam voluptas voluptate. Itaque laboriosam perspiciatis tempore! At cupiditate debitis distinctio eaque enim facere fuga in iure maiores, minima mollitia nemo porro quibusdam quidem quo, reiciendis reprehenderit repudiandae suscipit, tempora velit. A aliquam aliquid beatae, debitis dignissimos in ipsa itaque iure laborum maxime natus necessitatibus porro quidem tempore vitae? Ab, amet, assumenda culpa debitis delectus, deleniti dolore doloribus ducimus eum ex excepturi explicabo harum nisi nulla numquam optio quia quis repellat sed voluptas! Ab amet asperiores assumenda at atque, beatae corporis ea exercitationem expedita iusto, molestiae non, odio quae quibusdam repellat saepe suscipit tempore tenetur ullam ut vel voluptas voluptates voluptatibus? Aliquam amet aperiam assumenda eos facere in, officiis voluptate! Architecto atque aut blanditiis culpa, deleniti dicta dolorum ducimus ea error est laudantium, molestiae nostrum pariatur quasi quidem repellat sed sit tenetur totam vitae? Accusamus ad alias asperiores aspernatur cupiditate enim fuga id inventore iure nihil, nisi non nulla numquam porro quam quo quod, repellendus reprehenderit sed sunt totam voluptatem voluptatibus. Ab aut debitis laboriosam non? Adipisci alias aspernatur, consequatur, cumque deserunt eaque et ex expedita explicabo facere id itaque maiores maxime minus molestiae nam officiis perspiciatis placeat repellat vero? Adipisci alias autem dignissimos distinctio dolor dolorem, enim error esse est eum facere hic in incidunt ipsam maxime mollitia nihil nisi numquam odit pariatur quod quos rerum sint sunt suscipit vel veritatis voluptate! Animi asperiores atque debitis dignissimos esse eveniet excepturi laborum libero magni mollitia nam neque numquam officiis omnis, porro possimus quaerat, ut veritatis vero voluptatem! Ad, commodi corporis deserunt dicta fuga itaque iure non pariatur perferendis quae quaerat saepe sint suscipit tenetur, vero. Accusamus animi at atque cumque cupiditate error esse explicabo incidunt labore laborum minus nam natus non odit quia quibusdam quisquam quo quod reiciendis rerum tempora, ut vel velit veritatis voluptate. Aliquam exercitationem necessitatibus rerum sequi? Atque beatae et minus nisi ut. Accusamus adipisci aliquid at atque autem consectetur corporis cum dicta dolore, dolorem iste laborum magnam, maiores minus nemo neque optio provident quam tempora voluptas. Accusamus aspernatur debitis iste minima nostrum quas similique tempora unde vero. Autem cupiditate error illo magnam, nulla odit placeat unde vel veniam? Accusantium alias architecto atque aut consectetur consequatur cupiditate dicta dignissimos distinctio dolore doloremque earum eos harum hic illum, ipsa labore libero nobis non nostrum nulla odio placeat praesentium quaerat quibusdam quidem quisquam quod repellat repudiandae rerum saepe sapiente, sed sit soluta suscipit ullam voluptate? Et explicabo, inventore maiores nam nemo perspiciatis velit voluptate voluptatibus? Expedita itaque molestiae porro saepe similique, voluptate! Amet aut consequatur deleniti dicta dolor ipsam neque praesentium recusandae similique veritatis. Animi est molestias nostrum quaerat quia, quibusdam quo rem repellendus veritatis vitae. Alias asperiores assumenda at atque corporis debitis, dicta earum error esse illum incidunt ipsa ipsum laboriosam laudantium magnam magni modi natus necessitatibus nemo neque nulla odit perferendis placeat possimus provident quasi quisquam quos reiciendis rem repudiandae rerum, sed tempora tempore vel velit vitae, voluptates. At corporis, dolorem dolorum est, eveniet expedita fuga illum, in mollitia neque quia quidem ratione repudiandae saepe ullam vel voluptatibus! Consequuntur, ex excepturi id ipsum praesentium provident repellat sequi tenetur veniam! Accusamus amet blanditiis debitis delectus dicta distinctio doloremque dolores ducimus ea error et ex exercitationem facere hic id inventore magnam maxime molestias mollitia, nesciunt odio, perferendis quidem reprehenderit sapiente, veritatis vero voluptatibus. A accusantium adipisci aliquam aliquid at aut consectetur consequuntur culpa, delectus dignissimos dolorem doloremque dolores dolorum error eveniet, explicabo fuga illum impedit maxime molestias nemo nesciunt nihil nobis omnis perspiciatis porro praesentium provident quis quisquam quos recusandae rem saepe suscipit tenetur ut velit vero. Aliquid amet blanditiis consectetur dicta distinctio dolor doloremque ducimus ea earum eius error est exercitationem explicabo facilis, fugiat harum hic, inventore ipsam iusto laudantium libero maiores necessitatibus numquam porro quae quod quos ratione reiciendis rerum sequi similique, soluta suscipit temporibus veniam veritatis voluptate voluptatem. Adipisci animi atque culpa cupiditate dolore doloribus dolorum, ea enim id inventore laborum molestias natus nostrum omnis praesentium quam quidem quod quos repellendus sed, sequi unde vitae voluptate voluptates voluptatibus? Eveniet magni maxime numquam praesentium qui? A ad aliquam cumque distinctio eaque eligendi facere facilis hic incidunt, laboriosam minima, mollitia quos ratione rem sint veritatis vitae voluptatum? Accusamus accusantium adipisci architecto assumenda atque consectetur ducimus eaque eius, enim error, est inventore magnam magni minus neque nesciunt, nobis pariatur perferendis quaerat quas qui quis ratione saepe tempora voluptatem! Ad alias architecto aspernatur consectetur debitis deleniti deserunt dignissimos, distinctio eaque error esse excepturi ipsa iste iusto labore maxime molestias obcaecati odit quae quia sed sint soluta tenetur veritatis vero.'
    const tokenized = toTextBuffer(rawLorem);

    this.lorem = Array
      .from({ length: SETTINGS['buffer-add-size'] })
      .map(_ => tokenized);
  }

  refreshBuffer(): Promise<GeneratorOutput[]> {
    return Promise.resolve([...this.lorem]);
  }
}
